<!DOCTYPE html>
<html>
<head>
	<title>RESTaurant POS application</title>
	<link rel="stylesheet" type="text/css" href="/public/stylesheets/styles.css">
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script>
	<script type="text/javascript" src="/public/javascripts/app.js"></script>
	<script type="text/template" class="food-display">
	<li> <%%= name %> ...... $<%%= cents/100 %> 
	</li>
	<button>Remove</button>
	</script>

	<script type="text/template" class="party-display">
	<li><strong>Table #:</strong> <%%= table_number %><br><strong>Guests:</strong> <%%= num_of_guests %><br> <strong>Paid?</strong><%%=  pay_yet %><br> 
	</li>
	<button>Remove</button>
	</script>


</head>
<body>
<h1>Anong Thai Irish-American Fusion Restaurant</h1>

<div id="party-wrapper">
	
</div>

<div id="food-wrapper">
	
</div>

<div id="order-wrapper">
	
</div>
	


<script type="text/javascript">
	

	var app = app || {};

app.PartyModel = Backbone.Model.extend({});

app.PartyCollection = Backbone.Collection.extend({
	model: app.PartyModel,
	url: '/api/parties'
});

app.PartyView = Backbone.View.extend({
	tagName: 'ul',
	className: 'single-party',
	template: _.template($('.party-display').html()),
	render: function(){
		var data = this.model.attributes;
		this.$el.html( this.template( data ) );
	}

});

app.PartyListView = Backbone.View.extend({
	initialize: function(){
		this.listenTo(this.collection, 'sync', this.render)
	},
	render: function() {
		var parties = this.collection.models;
		for (var i = 0; i < parties.length; i++) {
			var singleParty = parties[i];
			var singlePartyView = new app.PartyView({model: singleParty});
			singlePartyView.render();
			this.$el.append(singlePartyView.$el);
		};
	}
});


$(document).ready(function(){

	app.parties = new app.PartyCollection();
	app.partyListPainter = new app.PartyListView({
		collection: app.parties,
		el: $('#party-wrapper')
	})

	app.parties.fetch()

});

</script>	
</body>
</html>